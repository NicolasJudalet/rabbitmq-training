rabbit_setup:
    connections:
        local:
            user: guest
            password: guest
            host: "127.0.0.1"
            port: 15672

    vhosts:
        "demo": #vhost name
            connection: local
            policies:
                AE:
                    pattern: ^(?:[^a]|a[^m]|am[^q]|amq[^\.])
                    apply-to: exchanges #exchanges|queues|all
                    definition:
                        alternate-exchange: unroutable
            exchanges:
                ms.payment.manomano.com:
                    type: topic
                    durable: true
            queues:
                ### Queues
                "ms.order.manomano.com;create_order":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: 'ms.payment.manomano.com', routing_key: 'charge.card.succeeded' }
                        - { exchange: 'ms.order.manomano.com', routing_key: 'create_order_retry' }

                "ms.carrier.manomano.com;increment_delivery_count_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: 'ms.carrier.manomano.com', routing_key: 'increment_delivery_count_error' }

                "ms.carrier.manomano.com;increment_delivery_count_retry_30000":
                    durable: true
                    auto-delete: false
                    arguments:
                        x-message-ttl: 30000
                        x-dead-letter-exchange: 'ms.carrier.manomano.com'
                        x-dead-letter-routing-key: 'increment_delivery_count_retry'
                    bindings:
                        - { exchange: 'ms.carrier.manomano.com', routing_key: 'increment_delivery_count_retry_30000' }

                "ms.carrier.manomano.com;increment_delivery_count_retry_300000":
                    durable: true
                    auto-delete: false
                    arguments:
                        x-message-ttl: 300000
                        x-dead-letter-exchange: 'ms.carrier.manomano.com'
                        x-dead-letter-routing-key: 'increment_delivery_count_retry'
                    bindings:
                        - { exchange: 'ms.carrier.manomano.com', routing_key: 'increment_delivery_count_retry_300000' }

                "ms.warehouse.manomano.com;send_order_to_warehouse":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.order.manomano.com, routing_key: 'order.create' }
                        - { exchange: ms.warehouse.manomano.com, routing_key: 'send_order_to_warehouse_retry' }
                "ms.warehouse.manomano.com;send_order_to_warehouse_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.warehouse.manomano.com, routing_key: 'send_order_to_warehouse_error' }
                "ms.warehouse.manomano.com;send_order_to_warehouse_retry_30000":
                    durable: true
                    auto-delete: false
                    arguments:
                        x-message-ttl: 30000
                        x-dead-letter-exchange: ms.warehouse.manomano.com
                        x-dead-letter-routing-key: send_order_to_warehouse_retry
                    bindings:
                        - { exchange: ms.warehouse.manomano.com, routing_key: 'send_order_to_warehouse_retry_30000' }
                "ms.warehouse.manomano.com;send_order_to_warehouse_retry_60000":
                    durable: true
                    auto-delete: false
                    arguments:
                        x-message-ttl: 60000
                        x-dead-letter-exchange: ms.warehouse.manomano.com
                        x-dead-letter-routing-key: send_order_to_warehouse_retry
                    bindings:
                        - { exchange: ms.warehouse.manomano.com, routing_key: 'send_order_to_warehouse_retry_60000' }

                "ms.warehouse.manomano.com;send_shipment_odp_to_warehouse":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.order.manomano.com, routing_key: 'legacy.shipment.created' }
                        - { exchange: ms.warehouse.manomano.com, routing_key: 'send_shipment_odp_to_warehouse_retry' }
                "ms.warehouse.manomano.com;send_shipment_odp_to_warehouse_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.warehouse.manomano.com, routing_key: 'send_shipment_odp_to_warehouse_error' }
                "ms.warehouse.manomano.com;send_shipment_odp_to_warehouse_retry_30000":
                    durable: true
                    auto-delete: false
                    arguments:
                        x-message-ttl: 30000
                        x-dead-letter-exchange: ms.warehouse.manomano.com
                        x-dead-letter-routing-key: send_shipment_odp_to_warehouse_retry
                    bindings:
                        - { exchange: ms.warehouse.manomano.com, routing_key: 'send_shipment_odp_to_warehouse_retry_30000' }
                "ms.warehouse.manomano.com;send_shipment_odp_to_warehouse_retry_60000":
                    durable: true
                    auto-delete: false
                    arguments:
                        x-message-ttl: 60000
                        x-dead-letter-exchange: ms.warehouse.manomano.com
                        x-dead-letter-routing-key: send_shipment_odp_to_warehouse_retry
                    bindings:
                        - { exchange: ms.warehouse.manomano.com, routing_key: 'send_shipment_odp_to_warehouse_retry_60000' }

                "ms.warehouse.manomano.com;create_logistic_product":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.catalog.manomano.com, routing_key: 'legacy.product.created' }
                        - { exchange: ms.warehouse.manomano.com, routing_key: 'create_logistic_product_retry' }
                "ms.warehouse.manomano.com;create_logistic_product_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.warehouse.manomano.com, routing_key: 'create_logistic_product_error' }
                "ms.warehouse.manomano.com;create_logistic_product_retry_30000":
                    durable: true
                    auto-delete: false
                    arguments:
                        x-message-ttl: 30000
                        x-dead-letter-exchange: ms.warehouse.manomano.com
                        x-dead-letter-routing-key: create_logistic_product_retry
                    bindings:
                        - { exchange: ms.warehouse.manomano.com, routing_key: 'create_logistic_product_retry_30000' }
                "ms.warehouse.manomano.com;create_logistic_product_retry_300000":
                    durable: true
                    auto-delete: false
                    arguments:
                        x-message-ttl: 300000
                        x-dead-letter-exchange: ms.warehouse.manomano.com
                        x-dead-letter-routing-key: create_logistic_product_retry
                    bindings:
                        - { exchange: ms.warehouse.manomano.com, routing_key: 'create_logistic_product_retry_300000' }

                "ms.warehouse.manomano.com;update_logistic_product_from_seller_stream":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.catalog.manomano.com, routing_key: 'legacy.product.updated' }
                        - { exchange: ms.warehouse.manomano.com, routing_key: 'update_logistic_product_from_seller_stream_retry' }
                "ms.warehouse.manomano.com;update_logistic_product_from_seller_stream_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.warehouse.manomano.com, routing_key: 'update_logistic_product_from_seller_stream_error' }
                "ms.warehouse.manomano.com;update_logistic_product_from_seller_stream_retry_30000":
                    durable: true
                    auto-delete: false
                    arguments:
                        x-message-ttl: 30000
                        x-dead-letter-exchange: ms.warehouse.manomano.com
                        x-dead-letter-routing-key: update_logistic_product_from_seller_stream_retry
                    bindings:
                        - { exchange: ms.warehouse.manomano.com, routing_key: 'update_logistic_product_from_seller_stream_retry_30000' }
                "ms.warehouse.manomano.com;update_logistic_product_from_seller_stream_retry_300000":
                    durable: true
                    auto-delete: false
                    arguments:
                        x-message-ttl: 300000
                        x-dead-letter-exchange: ms.warehouse.manomano.com
                        x-dead-letter-routing-key: update_logistic_product_from_seller_stream_retry
                    bindings:
                        - { exchange: ms.warehouse.manomano.com, routing_key: 'update_logistic_product_from_seller_stream_retry_300000' }

                "ms.catalog-stock.manomano.com;process_order_change":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.order.manomano.com, routing_key: 'order.create' }
                        - { exchange: ms.order.manomano.com, routing_key: 'order.update' }
                        - { exchange: ms.catalog-stock.manomano.com, routing_key: 'process_order_change_retry' }
                "ms.catalog-stock.manomano.com;process_order_change_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.catalog-stock.manomano.com, routing_key: 'process_order_change_error' }
                "ms.catalog-stock.manomano.com;process_order_change_retry_30000":
                    durable: true
                    auto-delete: false
                    arguments:
                        x-message-ttl: 30000
                        x-dead-letter-exchange: ms.catalog-stock.manomano.com
                        x-dead-letter-routing-key: process_order_change_retry
                    bindings:
                        - { exchange: ms.catalog-stock.manomano.com, routing_key: 'process_order_change_retry_30000' }
                "ms.catalog-stock.manomano.com;process_order_change_retry_60000":
                    durable: true
                    auto-delete: false
                    arguments:
                        x-message-ttl: 60000
                        x-dead-letter-exchange: ms.catalog-stock.manomano.com
                        x-dead-letter-routing-key: process_order_change_retry
                    bindings:
                        - { exchange: ms.catalog-stock.manomano.com, routing_key: 'process_order_change_retry_60000' }

                "ms.catalog.manomano.com;article_ratings_stats_update":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.rating.manomano.com, routing_key: 'ms.rating.manomano.com.article_rating.created' }
                        - { exchange: ms.rating.manomano.com, routing_key: 'ms.rating.manomano.com.article_rating.updated' }

                "ms.catalog.manomano.com;process_stock_update":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.catalog-stock.manomano.com, routing_key: 'stock.update' }
                        - { exchange: ms.catalog.manomano.com, routing_key: 'process_stock_update_retry' }
                "ms.catalog.manomano.com;process_stock_update_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.catalog.manomano.com, routing_key: 'process_stock_update_error' }
                "ms.catalog.manomano.com;process_stock_update_retry_120000":
                    durable: true
                    auto-delete: false
                    arguments:
                        x-message-ttl: 120000
                        x-dead-letter-exchange: ms.catalog.manomano.com
                        x-dead-letter-routing-key: process_stock_update_retry
                    bindings:
                        - { exchange: ms.catalog.manomano.com, routing_key: 'process_stock_update_retry_120000' }
                "ms.catalog.manomano.com;process_stock_update_retry_900000":
                    durable: true
                    auto-delete: false
                    arguments:
                        x-message-ttl: 900000
                        x-dead-letter-exchange: ms.catalog.manomano.com
                        x-dead-letter-routing-key: process_stock_update_retry
                    bindings:
                        - { exchange: ms.catalog.manomano.com, routing_key: 'process_stock_update_retry_900000' }
                "ms.catalog.manomano.com;process_stock_update_retry_1800000":
                    durable: true
                    auto-delete: false
                    arguments:
                        x-message-ttl: 1800000
                        x-dead-letter-exchange: ms.catalog.manomano.com
                        x-dead-letter-routing-key: process_stock_update_retry
                    bindings:
                        - { exchange: ms.catalog.manomano.com, routing_key: 'process_stock_update_retry_1800000' }

                "ms.catalog.manomano.com;media_product_update":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.catalog-media.manomano.com, routing_key: 'ms.catalog-media.manomano.com.media_product.updated' }

                "ms.catalog-media.manomano.com;media_import":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.catalog.manomano.com, routing_key: 'ms.catalog.manomano.com.product.created' }
                        - { exchange: ms.catalog.manomano.com, routing_key: 'ms.catalog.manomano.com.media_product.started' }

                "ms.catalog-media.manomano.com;media_import_express":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.catalog.manomano.com, routing_key: 'ms.catalog.manomano.com.media_product_express.started' }

                "ms.catalog.manomano.com;product_price_update":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.catalog.manomano.com, routing_key: 'ms.catalog.manomano.com.article.categorized' }
                        - { exchange: ms.catalog.manomano.com, routing_key: 'ms.catalog.manomano.com.category_vat.updated' }
                        - { exchange: ms.catalog.manomano.com, routing_key: 'ms.catalog.manomano.com.product.grouped' }
                        - { exchange: ms.catalog.manomano.com, routing_key: 'ms.catalog.manomano.com.product.ungrouped' }
                        - { exchange: ms.catalog.manomano.com, routing_key: 'ms.catalog.manomano.com.product_price.updated' }

                "ms.customer-care.manomano.com;article_rating":
                    durable: true
                    auto-delete: false
                    # Events published by ms.rating each time an article rating is created or updated (in order to create a Zendesk ticket if required):
                    bindings:
                        - { exchange: ms.rating.manomano.com, routing_key: 'ms.rating.manomano.com.article_rating.created' }
                        - { exchange: ms.rating.manomano.com, routing_key: 'ms.rating.manomano.com.article_rating.updated' }

                "ms.customer-care.manomano.com;nps_rating":
                    durable: true
                    auto-delete: false
                    # Events published by ms.rating each time a NPS rating is created:
                    bindings:
                        - { exchange: ms.rating.manomano.com, routing_key: 'ms.rating.manomano.com.nps_rating.created' }

                "ms.customer-care.manomano.com;seller_rating":
                    durable: true
                    auto-delete: false
                    # Events published by ms.rating each time a seller rating is created or updated (in order to create a Zendesk ticket if required):
                    bindings:
                        - { exchange: ms.rating.manomano.com, routing_key: 'ms.rating.manomano.com.seller_rating.created' }
                        - { exchange: ms.rating.manomano.com, routing_key: 'ms.rating.manomano.com.seller_rating.updated' }

                "ms.customer-care.manomano.com;shipment_alert":
                    durable: true
                    auto-delete: false
                    # Events published by ms.shipment-tracking each time an order tracking is updated:
                    bindings:
                        - { exchange: ms.shipment-tracking.manomano.com, routing_key: 'ms.shipment-tracking.tracking-event.updated' }

                ######
                ###> Payment Queues ###
                ######

                ### Queue used to send an email to customers after a charge failure (3DS, installment...)
                "manomano;send_email_for_capture_failure":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.payment.manomano.com, routing_key: 'charge.*.failed' }
                "manomano;send_email_for_capture_failure_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: manomano, routing_key: 'charge.*.failed' }

                ### Queues for KYC
                "ms.seller.manomano;update_kyc_status":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: "ms.payment.manomano.com", routing_key: "kyc.*.updated" }
                "ms.seller.manomano;update_kyc_status_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: "ms.seller.manomano.com", routing_key: "kyc.*.updated_error" }

                ### Queues used to send an email to customers if there is a refund of remaining funds after a bank transfer.
                "manomano;send_email_for_remaining_funds_refund_bank_transfer_fr":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.payment.manomano.com, routing_key: 'sepa_refund_fr' }
                "manomano;send_email_for_remaining_funds_refund_bank_transfer_fr_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: manomano, routing_key: 'send_email_for_remaining_funds_refund_bank_transfer_fr_error' }
                "manomano;send_email_for_remaining_funds_refund_bank_transfer_de":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.payment.manomano.com, routing_key: 'sepa_refund_de' }
                "manomano;send_email_for_remaining_funds_refund_bank_transfer_de_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: manomano, routing_key: 'send_email_for_remaining_funds_refund_bank_transfer_de_error' }
                "manomano;send_email_for_remaining_funds_refund_bank_transfer_es":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.payment.manomano.com, routing_key: 'sepa_refund_es' }
                "manomano;send_email_for_remaining_funds_refund_bank_transfer_es_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: manomano, routing_key: 'send_email_for_remaining_funds_refund_bank_transfer_es_error' }
                "manomano;send_email_for_remaining_funds_refund_bank_transfer_it":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.payment.manomano.com, routing_key: 'sepa_refund_it' }
                "manomano;send_email_for_remaining_funds_refund_bank_transfer_it_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: manomano, routing_key: 'send_email_for_remaining_funds_refund_bank_transfer_it_error' }
                "manomano;send_email_for_remaining_funds_refund_bank_transfer_gb":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.payment.manomano.com, routing_key: 'sepa_refund_gb' }
                "manomano;send_email_for_remaining_funds_refund_bank_transfer_gb_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: manomano, routing_key: 'send_email_for_remaining_funds_refund_bank_transfer_gb_error' }

                ### Queues used to validate a transaction when charge succeed after a timeout
                "manomano;validate_charged_transaction_fr":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.payment.manomano.com, routing_key: 'card_charge_succeeded_fr' }
                "manomano;validate_charged_transaction_fr_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: manomano, routing_key: 'validate_charged_transaction_fr_error' }
                "manomano;validate_charged_transaction_de":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.payment.manomano.com, routing_key: 'card_charge_succeeded_de' }
                "manomano;validate_charged_transaction_de_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: manomano, routing_key: 'validate_charged_transaction_de_error' }
                "manomano;validate_charged_transaction_es":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.payment.manomano.com, routing_key: 'card_charge_succeeded_es' }
                "manomano;validate_charged_transaction_es_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: manomano, routing_key: 'validate_charged_transaction_es_error' }
                "manomano;validate_charged_transaction_it":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.payment.manomano.com, routing_key: 'card_charge_succeeded_it' }
                "manomano;validate_charged_transaction_it_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: manomano, routing_key: 'validate_charged_transaction_it_error' }
                "manomano;validate_charged_transaction_gb":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.payment.manomano.com, routing_key: 'card_charge_succeeded_gb' }
                "manomano;validate_charged_transaction_gb_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: manomano, routing_key: 'validate_charged_transaction_gb_error' }

                ### Queues used to send and email when a charge fail after a timeout
                "manomano;send_email_for_card_charge_failed_fr":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.payment.manomano.com, routing_key: 'card_charge_failed_fr' }
                "manomano;send_email_for_card_charge_failed_fr_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: manomano, routing_key: 'send_email_for_card_charge_failed_fr_error' }
                "manomano;send_email_for_card_charge_failed_de":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.payment.manomano.com, routing_key: 'card_charge_failed_de' }
                "manomano;send_email_for_card_charge_failed_de_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: manomano, routing_key: 'send_email_for_card_charge_failed_de_error' }
                "manomano;send_email_for_card_charge_failed_es":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.payment.manomano.com, routing_key: 'card_charge_failed_es' }
                "manomano;send_email_for_card_charge_failed_es_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: manomano, routing_key: 'send_email_for_card_charge_failed_es_error' }
                "manomano;send_email_for_card_charge_failed_it":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.payment.manomano.com, routing_key: 'card_charge_failed_it' }
                "manomano;send_email_for_card_charge_failed_it_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: manomano, routing_key: 'send_email_for_card_charge_failed_it_error' }
                "manomano;send_email_for_card_charge_failed_gb":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.payment.manomano.com, routing_key: 'card_charge_failed_gb' }
                "manomano;send_email_for_card_charge_failed_gb_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: manomano, routing_key: 'send_email_for_card_charge_failed_gb_error' }

                ### Queues used to update a transaction after a payment is successful or in failure
                "ms.transaction.manomano.com;update_3ds_transaction":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: 'ms.payment.manomano.com', routing_key: 'charge.card_secure.*' }
                "ms.transaction.manomano.com;update_3ds_transaction_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: 'ms.transaction.manomano.com', routing_key: 'charge.card_secure.*' }

                "ms.transaction.manomano.com;update_successful_transaction":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: 'ms.payment.manomano.com', routing_key: 'charge.*.succeeded' }
                "ms.transaction.manomano.com;update_successful_transaction_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: 'ms.transaction.manomano.com', routing_key: 'charge.*.succeeded' }

                "ms.transaction.manomano.com;update_failed_transaction":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: 'ms.payment.manomano.com', routing_key: 'charge.*.failed' }
                "ms.transaction.manomano.com;update_failed_transaction_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: 'ms.transaction.manomano.com', routing_key: 'charge.*.failed' }

                ### Queue used to publish seller payment details for ms.payment
                "ms.transaction.manomano.com;publish_validated_transaction_details":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: 'manomano', routing_key: 'manomano.transaction.validated' }
                "ms.transaction.manomano.com;publish_validated_transaction_details_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: 'ms.transaction.manomano.com', routing_key: 'manomano.transaction.validated' }

                ### Queues used to process refunds asynchronously
                "ms.payment.manomano.com;process_refund":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: 'ms.transaction.manomano.com', routing_key: 'refund.to_process' }
                "ms.payment.manomano.com;process_refund_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: 'ms.payment.manomano.com', routing_key: 'refund.to_process_error' }
                "ms.transaction.manomano.com;update_successful_refund":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: 'ms.payment.manomano.com', routing_key: 'refund.succeeded' }
                "ms.transaction.manomano.com;update_successful_refund_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: 'ms.transaction.manomano.com', routing_key: 'refund.succeeded' }

                ### Payouts Queues
                "ms.payment.manomano.com;create_transfer_for_partner":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: 'ms.transaction.manomano.com', routing_key: 'transaction.succeeded' }
                        - { exchange: 'ms.transaction.manomano.com', routing_key: 'transaction.seller_payment_details' }
                "ms.payment.manomano.com;create_transfer_for_partner_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: 'ms.payment.manomano.com', routing_key: 'transaction.succeeded_error' }
                        - { exchange: 'ms.payment.manomano.com', routing_key: 'transaction.seller_payment_details_error' }

                ######
                ###< Payment Queues ###
                ######

                ### Queues for ab-tests
                "manomano;update_ab_test_cache":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.ab-test.manomano.com, routing_key: ab_test_list_updated }
                        - { exchange: manomano, routing_key: ab_test_list_updated_retry }
                "manomano;update_ab_test_cache_fr":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.ab-test.manomano.com, routing_key: ms.ab_test.manomano.com.list.updated }
                        - { exchange: manomano, routing_key: ms.ab_test.manomano.com.list.updated_retry }
                "manomano;update_ab_test_cache_gb":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.ab-test.manomano.com, routing_key: ms.ab_test.manomano.com.list.updated }
                        - { exchange: manomano, routing_key: ms.ab_test.manomano.com.list.updated_retry }
                "manomano;update_ab_test_cache_it":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.ab-test.manomano.com, routing_key: ms.ab_test.manomano.com.list.updated }
                        - { exchange: manomano, routing_key: ms.ab_test.manomano.com.list.updated_retry }
                "manomano;update_ab_test_cache_de":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.ab-test.manomano.com, routing_key: ms.ab_test.manomano.com.list.updated }
                        - { exchange: manomano, routing_key: ms.ab_test.manomano.com.list.updated_retry }
                "manomano;update_ab_test_cache_es":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.ab-test.manomano.com, routing_key: ms.ab_test.manomano.com.list.updated }
                        - { exchange: manomano, routing_key: ms.ab_test.manomano.com.list.updated_retry }
                "manomano;update_ab_test_cache_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: manomano, routing_key: 'ab_test_list_updated_error' }
                "manomano;update_ab_test_cache_retry_60000":
                    durable: true
                    auto-delete: false
                    arguments:
                        x-message-ttl: 60000
                        x-dead-letter-exchange: manomano
                        x-dead-letter-routing-key: ab_test_list_updated_retry
                    bindings:
                        - { exchange: manomano, routing_key: 'ab_test_list_updated_error_60000' }

                ### Queues for dynamic parameters
                "manomano;update_dynamic_parameter":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: continuous-delivery, routing_key: cd.asset.created }

                ### Queues used to process stock snapshots from ms.warehouse
                "ms.catalog-stock.manomano.com;update_warehouse_product_stock":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.warehouse.manomano.com, routing_key: warehouse_product_stock.update }
                "ms.catalog-stock.manomano.com;update_warehouse_product_stock_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.catalog-stock.manomano.com, routing_key: warehouse_product_stock.update_error }

                ### Queues process shipment report
                "ms.order.manomano.com;process_warehouse_order_shipped":
                    durable: true
                    auto-delete: false
                    bindings:
                    - { exchange: ms.warehouse.manomano.com , routing_key: 'warehouse_order.shipped' }
                "ms.order.manomano.com;process_warehouse_order_shipped_error":
                    durable: true
                    auto-delete: false
                    bindings:
                    - { exchange: ms.order.manomano.com, routing_key: 'process_warehouse_order_shipped_error' }

                ### Queues HUB-ERP
                "ms.hub-erp.manomano.com;task_perform":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.hub-erp.manomano.com, routing_key: 'task_perform' }
                "ms.hub-erp.manomano.com;task_perform_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.hub-erp.manomano.com, routing_key: 'task_perform_error' }
                "ms.hub-erp.manomano.com;task_perform_retry":
                    durable: true
                    auto-delete: false
                    arguments:
                        x-message-ttl: 30000
                        x-dead-letter-exchange: ms.hub-erp.manomano.com
                        x-dead-letter-routing-key: task_perform
                    bindings:
                        - { exchange: ms.hub-erp.manomano.com, routing_key: 'task_perform_retry' }

                ### Queue to get all message failed to be delivered to their queue
                unroutable:
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: unroutable, routing_key: '' }

                ### Queues used to process reception report from ms.warehouse
                "ms.catalog-stock.manomano.com;process_warehouse_reception_report":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.warehouse.manomano.com, routing_key: warehouse_supply.received }
                "ms.catalog-stock.manomano.com;process_warehouse_reception_report_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.catalog-stock.manomano.com, routing_key: warehouse_supply.received_error }

                ### Queues for messenger microservice
                "ms.messenger.manomano.com;send_email":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: manomano, routing_key: manomano.invoice.uploaded }
                        - { exchange: manomano, routing_key: manomano.transaction.validated }
                        - { exchange: manomano, routing_key: manomano.order.sent }
                        - { exchange: manomano, routing_key: manomano.cart.abandoned }
                        - { exchange: manomano, routing_key: manomano.article_rating.pending }
                        - { exchange: manomano, routing_key: manomano.transaction.failed.cart_renew }
                        - { exchange: ms.customer.manomano.com, routing_key: ms.customer.manomano.com.customer.created_delayed_900000 }
                        - { exchange: ms.messenger.manomano.com, routing_key: ms.messenger.manomano.com.email.send }
                        - { exchange: ms.customer.manomano.com, routing_key: ms.customer.manomano.com.b2b_evidence_reminder.created}
                        - { exchange: manomano, routing_key: manomano.delivery_alert.parcel_holding }
                        - { exchange: manomano, routing_key: manomano.delivery_alert.wrong_address }
                        - { exchange: manomano, routing_key: manomano.delivery_alert.unsuccessful_delivery_attempt }
                        - { exchange: manomano, routing_key: manomano.password_reminder.created }
                        - { exchange: manomano, routing_key: manomano.customer_autologin.created }
                "ms.messenger.manomano.com;send_sms":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: manomano, routing_key: manomano.order.sent }
                "ms.messenger.manomano.com;delay_customer_created":
                    durable: true
                    auto-delete: false
                    arguments:
                        x-message-ttl: 900000
                        x-dead-letter-exchange: ms.customer.manomano.com
                        x-dead-letter-routing-key: ms.customer.manomano.com.customer.created_delayed_900000
                    bindings:
                        - { exchange: ms.customer.manomano.com, routing_key: ms.customer.manomano.com.customer.created }

                ### Queues for best offer
                "ms.catalog.manomano.com;process_best_offer_update":
                    durable: true
                    auto-delete: false
                    bindings:
                    - { exchange: ms.catalog.manomano.com, routing_key: ms.catalog.manomano.com.product.updated }
                    - { exchange: ms.catalog.manomano.com, routing_key: ms.catalog.manomano.com.product.suspended }
                    - { exchange: ms.catalog.manomano.com, routing_key: ms.catalog.manomano.com.product.unsuspended }

                ### Queues for save_card
                "ms.customer.manomano.com;save_card":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.payment.manomano.com, routing_key: card_charge_succeeded_fr }
                        - { exchange: ms.payment.manomano.com, routing_key: card_charge_succeeded_es }
                        - { exchange: ms.payment.manomano.com, routing_key: card_charge_succeeded_it }
                        - { exchange: ms.payment.manomano.com, routing_key: card_charge_succeeded_de }
                        - { exchange: ms.payment.manomano.com, routing_key: card_charge_succeeded_gb }
                        - { exchange: ms.payment.manomano.com, routing_key: charge.card_secure.succeeded }
                        - { exchange: ms.customer.manomano.com, routing_key: save_card_retry }

                "ms.customer.manomano.com;save_card_retry_30000":
                    durable: true
                    auto-delete: false
                    arguments:
                        x-message-ttl: 30000
                        x-dead-letter-exchange: 'ms.customer.manomano.com'
                        x-dead-letter-routing-key: 'save_card_retry'
                    bindings:
                        - { exchange: 'ms.customer.manomano.com', routing_key: 'save_card_retry_30000' }

                "ms.customer.manomano.com;save_card_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: 'ms.customer.manomano.com', routing_key: 'save_card_error' }

                ### Queues for disable_card
                "ms.customer.manomano.com;disable_card":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: ms.payment.manomano.com, routing_key: charge.card.failed }
                        - { exchange: ms.payment.manomano.com, routing_key: charge.card_secure.failed }
                        - { exchange: ms.customer.manomano.com, routing_key: disable_card_retry }

                "ms.customer.manomano.com;disable_card_retry_30000":
                    durable: true
                    auto-delete: false
                    arguments:
                        x-message-ttl: 30000
                        x-dead-letter-exchange: 'ms.customer.manomano.com'
                        x-dead-letter-routing-key: 'disable_card_retry'
                    bindings:
                        - { exchange: 'ms.customer.manomano.com', routing_key: 'disable_card_retry_30000' }

                "ms.customer.manomano.com;disable_card_error":
                    durable: true
                    auto-delete: false
                    bindings:
                        - { exchange: 'ms.customer.manomano.com', routing_key: 'disable_card_error' }
